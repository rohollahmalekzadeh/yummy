import Head from 'next/head'
import {Banner, OrderPoster} from 'components'
import {
  getOrderListByFood,
  getOrderListByDiet,
  getOrderListByMeal,
} from 'network/food-api/order-list'

import {normalizeDataForPoster} from 'utils/utils'

export async function getStaticProps() {
  const highProtein = await getOrderListByDiet('high-protein')
  const juices = await getOrderListByFood('juice')
  const brunch = await getOrderListByMeal('brunch')

  const highProteinList = normalizeDataForPoster(highProtein, {
    sliceFrom: 0,
    sliceTo: 5,
  })

  const juicesList = normalizeDataForPoster(juices, {
    sliceFrom: 0,
    sliceTo: 5,
  })

  const brunchList = normalizeDataForPoster(brunch, {
    sliceFrom: 0,
    sliceTo: 5,
  })

  return {
    props: {
      highProteinList: {...highProteinList, title: highProtein.title},
      juicesList: {...juicesList, title: juices.title},
      brunchList: {...brunchList, title: brunch.title},
    },
  }
}

const Home = ({highProteinList, juicesList, brunchList}: any) => {
  return (
    <div>
      <Head>
        <title>Yummy</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/assets/logo2.jpg" />
      </Head>
      <div>
        <Banner />
      </div>
    </div>
  )
}

export default Home
